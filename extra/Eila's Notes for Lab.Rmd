---
title: "Eila's Notes for Lab (19th Nov)"
author: "Eila"
---

```{r load-packages, message = FALSE}
library(tidyverse)
library(broom)
library(here)
library(skimr)
library(glue)
library(forcats)
library(scales)
```

I noticed some details we should include with Callum's visualisations in the proposal. This is some rough workings, feel free to change/add to them.

```{r load-dataset, message = FALSE}
f1merged <- read_csv("/cloud/project/data/f1merged.csv")
f1merged_hybrid <- read_csv("/cloud/project/data/f1merged_hybrid.csv")
```


### Does the choice of car significantly affect race performance?

Callum's visualisation suggests a huge correlation - that choosing a Mercedes will improve your race performance. I wasn't convinced that this was a causation rather than a correlation (i.e. better racers tend to choose Mercedes, not that Mercedes make the drivers better) or misleading data (i.e. most drivers chose a Mercedes, giving it a higher number of wins). 

First I checked what percent of drivers use each type of car (and then turned it into a pie chart for no reason).
```{r}
#These lists are copied from Callum's proposal code - not sure how to 
#access them if they are in a different file

key_teams <- c("Ferrari", 
               "McLaren",
               "Mercedes",
               "Red Bull",
               "Williams")

key_team_colours <- c("Mercedes" = "#00d2be",
                  "Red Bull" = "#0600ef",
                  "Ferrari" = "#dc0000",
                  "McLaren" = "#ff8700",
                  "Williams" = "#0082fa")

f1merged_hybrid %>%
  filter(constructorname %in% key_teams) %>%
  group_by(constructorname) %>%
  count(constructorname) %>%
  arrange(desc(n)) %>%
  ggplot(aes(x = "", y = n, fill = constructorname)) +
  geom_bar(position = "fill", stat = "identity", width = 1) +
  scale_fill_manual(values = key_team_colours) +
  labs(title = "Amount of F1 Drivers with Each Car Constructor",
       fill  = "Car Constructor") +
  
  #Everything past this point is just to create a clean pie chart
  coord_polar("y", start = 0) +
  theme_minimal() +
  theme(axis.text.x  = element_blank(),
        axis.title.x = element_blank(),
        axis.text.y  = element_blank(),
        axis.title.y = element_blank(),
        panel.border = element_blank(),
        panel.grid   = element_blank())

```
We can see they each have an equal number of drivers, meaning there is no misleading data. 

I'll check the correlation =/ causation thing tomorrow and I'll add to this more.
